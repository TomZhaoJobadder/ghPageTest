{"highlightCode":"<span class=\"token comment\" spellcheck=\"true\">/* declarations: NzModalCustomComponent */</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> Input<span class=\"token punctuation\">,</span> TemplateRef<span class=\"token punctuation\">,</span> ViewContainerRef <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@angular/core'</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NzModalRef<span class=\"token punctuation\">,</span> NzModalService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'ng-zorro-antd/modal'</span><span class=\"token punctuation\">;</span>\r\n\r\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'nz-demo-modal-service'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token template-string\">template: <span class=\"token html\">`\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>createModal()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>String<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>createTplModal(tplTitle, tplContent, tplFooter)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Template<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">#tplTitle</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Title Template<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">#tplContent</span> <span class=\"token attr-name\">let-params</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>some contents...<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>some contents...<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{{ params.value }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">#tplFooter</span> <span class=\"token attr-name\">let-ref</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>modalRef<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>ref.destroy()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Destroy<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>destroyTplModal(ref)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">[nzLoading]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>tplModalButtonLoading<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n        Close after submit\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>createComponentModal()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Use Component<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>createCustomButtonModal()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Custom Button<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span>\r\n\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">nzType</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>openAndCloseAll()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Open more modals then close all after 2s<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n  `</span></span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token styles-string\">styles: [\r\n    <span class=\"token css\"><span class=\"token selector\">`\r\n      button </span><span class=\"token punctuation\">{</span>\r\n        <span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8</span>px<span class=\"token punctuation\">;</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    `</span>\r\n  ]</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NzDemoModalServiceComponent</span> <span class=\"token punctuation\">{</span>\r\n  tplModalButtonLoading <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\r\n  disabled <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> readonly modal<span class=\"token punctuation\">:</span> NzModalService<span class=\"token punctuation\">,</span> <span class=\"token keyword\">private</span> readonly viewContainerRef<span class=\"token punctuation\">:</span> ViewContainerRef<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">createModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      nzTitle<span class=\"token punctuation\">:</span> <span class=\"token string\">'Modal Title'</span><span class=\"token punctuation\">,</span>\r\n      nzContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'string, will close after 1 sec'</span><span class=\"token punctuation\">,</span>\r\n      nzClosable<span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">,</span>\r\n      nzOnOk<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">createTplModal</span><span class=\"token punctuation\">(</span>tplTitle<span class=\"token punctuation\">:</span> TemplateRef<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> tplContent<span class=\"token punctuation\">:</span> TemplateRef<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> tplFooter<span class=\"token punctuation\">:</span> TemplateRef<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      nzTitle<span class=\"token punctuation\">:</span> tplTitle<span class=\"token punctuation\">,</span>\r\n      nzContent<span class=\"token punctuation\">:</span> tplContent<span class=\"token punctuation\">,</span>\r\n      nzFooter<span class=\"token punctuation\">:</span> tplFooter<span class=\"token punctuation\">,</span>\r\n      nzMaskClosable<span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">,</span>\r\n      nzClosable<span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">,</span>\r\n      nzComponentParams<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\r\n        value<span class=\"token punctuation\">:</span> <span class=\"token string\">'Template Context'</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      nzOnOk<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Click ok'</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">destroyTplModal</span><span class=\"token punctuation\">(</span>modelRef<span class=\"token punctuation\">:</span> NzModalRef<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tplModalButtonLoading <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tplModalButtonLoading <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\r\n      modelRef<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">createComponentModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> modal <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      nzTitle<span class=\"token punctuation\">:</span> <span class=\"token string\">'Modal Title'</span><span class=\"token punctuation\">,</span>\r\n      nzContent<span class=\"token punctuation\">:</span> NzModalCustomComponent<span class=\"token punctuation\">,</span>\r\n      nzViewContainerRef<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>viewContainerRef<span class=\"token punctuation\">,</span>\r\n      nzComponentParams<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\r\n        title<span class=\"token punctuation\">:</span> <span class=\"token string\">'title in component'</span><span class=\"token punctuation\">,</span>\r\n        subtitle<span class=\"token punctuation\">:</span> <span class=\"token string\">'component sub title，will be changed after 2 sec'</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      nzOnOk<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n      nzFooter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          label<span class=\"token punctuation\">:</span> <span class=\"token string\">'change component title from outside'</span><span class=\"token punctuation\">,</span>\r\n          onClick<span class=\"token punctuation\">:</span> componentInstance <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n            componentInstance<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">'title in inner component is changed'</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> modal<span class=\"token punctuation\">.</span><span class=\"token function\">getContentComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    modal<span class=\"token punctuation\">.</span>afterOpen<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[afterOpen] emitted!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\" spellcheck=\"true\">// Return a result when closed</span>\r\n    modal<span class=\"token punctuation\">.</span>afterClose<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>result <span class=\"token operator\">=</span><span class=\"token operator\">></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[afterClose] The result is:'</span><span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\" spellcheck=\"true\">// delay until modal instance created</span>\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n      instance<span class=\"token punctuation\">.</span>subtitle <span class=\"token operator\">=</span> <span class=\"token string\">'sub title is changed'</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">createCustomButtonModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> modal<span class=\"token punctuation\">:</span> NzModalRef <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n      nzTitle<span class=\"token punctuation\">:</span> <span class=\"token string\">'custom button demo'</span><span class=\"token punctuation\">,</span>\r\n      nzContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'pass array of button config to nzFooter to create multiple buttons'</span><span class=\"token punctuation\">,</span>\r\n      nzFooter<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          label<span class=\"token punctuation\">:</span> <span class=\"token string\">'Close'</span><span class=\"token punctuation\">,</span>\r\n          shape<span class=\"token punctuation\">:</span> <span class=\"token string\">'round'</span><span class=\"token punctuation\">,</span>\r\n          onClick<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> modal<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          label<span class=\"token punctuation\">:</span> <span class=\"token string\">'Confirm'</span><span class=\"token punctuation\">,</span>\r\n          type<span class=\"token punctuation\">:</span> <span class=\"token string\">'primary'</span><span class=\"token punctuation\">,</span>\r\n          onClick<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> nzTitle<span class=\"token punctuation\">:</span> <span class=\"token string\">'Confirm Modal Title'</span><span class=\"token punctuation\">,</span> nzContent<span class=\"token punctuation\">:</span> <span class=\"token string\">'Confirm Modal Content'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          label<span class=\"token punctuation\">:</span> <span class=\"token string\">'Change Button Status'</span><span class=\"token punctuation\">,</span>\r\n          type<span class=\"token punctuation\">:</span> <span class=\"token string\">'primary'</span><span class=\"token punctuation\">,</span>\r\n          danger<span class=\"token punctuation\">:</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">,</span>\r\n          loading<span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">,</span>\r\n          <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\r\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loading <span class=\"token operator\">=</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">;</span>\r\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">=</span> <span class=\"token keyword\">true</span><span class=\"token punctuation\">;</span>\r\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>label <span class=\"token operator\">=</span> <span class=\"token string\">'can not be clicked！'</span><span class=\"token punctuation\">;</span>\r\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n          <span class=\"token punctuation\">}</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">{</span>\r\n          label<span class=\"token punctuation\">:</span> <span class=\"token string\">'async load'</span><span class=\"token punctuation\">,</span>\r\n          type<span class=\"token punctuation\">:</span> <span class=\"token string\">'dashed'</span><span class=\"token punctuation\">,</span>\r\n          onClick<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span>resolve <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">openAndCloseAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">let</span> pos <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token punctuation\">[</span><span class=\"token string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'info'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>method <span class=\"token operator\">=</span><span class=\"token operator\">></span>\r\n      <span class=\"token comment\" spellcheck=\"true\">// @ts-ignore</span>\r\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">[</span>method<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n        nzMask<span class=\"token punctuation\">:</span> <span class=\"token keyword\">false</span><span class=\"token punctuation\">,</span>\r\n        nzTitle<span class=\"token punctuation\">:</span> `Test $<span class=\"token punctuation\">{</span>method<span class=\"token punctuation\">}</span> title`<span class=\"token punctuation\">,</span>\r\n        nzContent<span class=\"token punctuation\">:</span> `Test content<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span>b<span class=\"token operator\">></span>$<span class=\"token punctuation\">{</span>method<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>b<span class=\"token operator\">></span>`<span class=\"token punctuation\">,</span>\r\n        nzStyle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> position<span class=\"token punctuation\">:</span> <span class=\"token string\">'absolute'</span><span class=\"token punctuation\">,</span> top<span class=\"token punctuation\">:</span> `$<span class=\"token punctuation\">{</span>pos <span class=\"token operator\">*</span> <span class=\"token number\">70</span><span class=\"token punctuation\">}</span>px`<span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">:</span> `$<span class=\"token punctuation\">{</span>pos<span class=\"token operator\">++</span> <span class=\"token operator\">*</span> <span class=\"token number\">300</span><span class=\"token punctuation\">}</span>px` <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span>afterAllClose<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'afterAllClose emitted!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">closeAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n@<span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\r\n  selector<span class=\"token punctuation\">:</span> <span class=\"token string\">'nz-modal-custom-component'</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token template-string\">template: <span class=\"token html\">`\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{ title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h4</span><span class=\"token punctuation\">></span></span>{{ subtitle }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h4</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Get Modal instance in component<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\r\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">nz-button</span> <span class=\"token attr-name\">[nzType]</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">'</span>primary<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">(click)</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>destroyModal()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>destroy modal in the component<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\r\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n  `</span></span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NzModalCustomComponent</span> <span class=\"token punctuation\">{</span>\r\n  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> title<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">;</span>\r\n  @<span class=\"token function\">Input</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> subtitle<span class=\"token operator\">?</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">string</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">private</span> readonly modal<span class=\"token punctuation\">:</span> NzModalRef<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token function\">destroyModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">void</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>modal<span class=\"token punctuation\">.</span><span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">:</span> <span class=\"token string\">'this the result data'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n","rawCode":"/* declarations: NzModalCustomComponent */\r\n\r\nimport { Component, Input, TemplateRef, ViewContainerRef } from '@angular/core';\r\n\r\nimport { NzModalRef, NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n@Component({\r\n  selector: 'nz-demo-modal-service',\r\n  template: `\r\n    <button nz-button nzType=\"primary\" (click)=\"createModal()\">\r\n      <span>String</span>\r\n    </button>\r\n\r\n    <button nz-button nzType=\"primary\" (click)=\"createTplModal(tplTitle, tplContent, tplFooter)\">\r\n      <span>Template</span>\r\n    </button>\r\n    <ng-template #tplTitle>\r\n      <span>Title Template</span>\r\n    </ng-template>\r\n    <ng-template #tplContent let-params>\r\n      <p>some contents...</p>\r\n      <p>some contents...</p>\r\n      <p>{{ params.value }}</p>\r\n    </ng-template>\r\n    <ng-template #tplFooter let-ref=\"modalRef\">\r\n      <button nz-button (click)=\"ref.destroy()\">Destroy</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"destroyTplModal(ref)\" [nzLoading]=\"tplModalButtonLoading\">\r\n        Close after submit\r\n      </button>\r\n    </ng-template>\r\n\r\n    <br />\r\n    <br />\r\n\r\n    <button nz-button nzType=\"primary\" (click)=\"createComponentModal()\">\r\n      <span>Use Component</span>\r\n    </button>\r\n\r\n    <button nz-button nzType=\"primary\" (click)=\"createCustomButtonModal()\">Custom Button</button>\r\n\r\n    <br />\r\n    <br />\r\n\r\n    <button nz-button nzType=\"primary\" (click)=\"openAndCloseAll()\">Open more modals then close all after 2s</button>\r\n  `,\r\n  styles: [\r\n    `\r\n      button {\r\n        margin-right: 8px;\r\n      }\r\n    `\r\n  ]\r\n})\r\nexport class NzDemoModalServiceComponent {\r\n  tplModalButtonLoading = false;\r\n  disabled = false;\r\n\r\n  constructor(private readonly modal: NzModalService, private readonly viewContainerRef: ViewContainerRef) {}\r\n\r\n  createModal(): void {\r\n    this.modal.create({\r\n      nzTitle: 'Modal Title',\r\n      nzContent: 'string, will close after 1 sec',\r\n      nzClosable: false,\r\n      nzOnOk: () => new Promise(resolve => setTimeout(resolve, 1000))\r\n    });\r\n  }\r\n\r\n  createTplModal(tplTitle: TemplateRef<{}>, tplContent: TemplateRef<{}>, tplFooter: TemplateRef<{}>): void {\r\n    this.modal.create({\r\n      nzTitle: tplTitle,\r\n      nzContent: tplContent,\r\n      nzFooter: tplFooter,\r\n      nzMaskClosable: false,\r\n      nzClosable: false,\r\n      nzComponentParams: {\r\n        value: 'Template Context'\r\n      },\r\n      nzOnOk: () => console.log('Click ok')\r\n    });\r\n  }\r\n\r\n  destroyTplModal(modelRef: NzModalRef): void {\r\n    this.tplModalButtonLoading = true;\r\n    setTimeout(() => {\r\n      this.tplModalButtonLoading = false;\r\n      modelRef.destroy();\r\n    }, 1000);\r\n  }\r\n\r\n  createComponentModal(): void {\r\n    const modal = this.modal.create({\r\n      nzTitle: 'Modal Title',\r\n      nzContent: NzModalCustomComponent,\r\n      nzViewContainerRef: this.viewContainerRef,\r\n      nzComponentParams: {\r\n        title: 'title in component',\r\n        subtitle: 'component sub title，will be changed after 2 sec'\r\n      },\r\n      nzOnOk: () => new Promise(resolve => setTimeout(resolve, 1000)),\r\n      nzFooter: [\r\n        {\r\n          label: 'change component title from outside',\r\n          onClick: componentInstance => {\r\n            componentInstance!.title = 'title in inner component is changed';\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    const instance = modal.getContentComponent();\r\n    modal.afterOpen.subscribe(() => console.log('[afterOpen] emitted!'));\r\n    // Return a result when closed\r\n    modal.afterClose.subscribe(result => console.log('[afterClose] The result is:', result));\r\n\r\n    // delay until modal instance created\r\n    setTimeout(() => {\r\n      instance.subtitle = 'sub title is changed';\r\n    }, 2000);\r\n  }\r\n\r\n  createCustomButtonModal(): void {\r\n    const modal: NzModalRef = this.modal.create({\r\n      nzTitle: 'custom button demo',\r\n      nzContent: 'pass array of button config to nzFooter to create multiple buttons',\r\n      nzFooter: [\r\n        {\r\n          label: 'Close',\r\n          shape: 'round',\r\n          onClick: () => modal.destroy()\r\n        },\r\n        {\r\n          label: 'Confirm',\r\n          type: 'primary',\r\n          onClick: () => this.modal.confirm({ nzTitle: 'Confirm Modal Title', nzContent: 'Confirm Modal Content' })\r\n        },\r\n        {\r\n          label: 'Change Button Status',\r\n          type: 'primary',\r\n          danger: true,\r\n          loading: false,\r\n          onClick(): void {\r\n            this.loading = true;\r\n            setTimeout(() => (this.loading = false), 1000);\r\n            setTimeout(() => {\r\n              this.loading = false;\r\n              this.disabled = true;\r\n              this.label = 'can not be clicked！';\r\n            }, 2000);\r\n          }\r\n        },\r\n        {\r\n          label: 'async load',\r\n          type: 'dashed',\r\n          onClick: () => new Promise(resolve => setTimeout(resolve, 2000))\r\n        }\r\n      ]\r\n    });\r\n  }\r\n\r\n  openAndCloseAll(): void {\r\n    let pos = 0;\r\n\r\n    ['create', 'info', 'success', 'error'].forEach(method =>\r\n      // @ts-ignore\r\n      this.modal[method]({\r\n        nzMask: false,\r\n        nzTitle: `Test ${method} title`,\r\n        nzContent: `Test content: <b>${method}</b>`,\r\n        nzStyle: { position: 'absolute', top: `${pos * 70}px`, left: `${pos++ * 300}px` }\r\n      })\r\n    );\r\n\r\n    this.modal.afterAllClose.subscribe(() => console.log('afterAllClose emitted!'));\r\n\r\n    setTimeout(() => this.modal.closeAll(), 2000);\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'nz-modal-custom-component',\r\n  template: `\r\n    <div>\r\n      <h2>{{ title }}</h2>\r\n      <h4>{{ subtitle }}</h4>\r\n      <p>\r\n        <span>Get Modal instance in component</span>\r\n        <button nz-button [nzType]=\"'primary'\" (click)=\"destroyModal()\">destroy modal in the component</button>\r\n      </p>\r\n    </div>\r\n  `\r\n})\r\nexport class NzModalCustomComponent {\r\n  @Input() title?: string;\r\n  @Input() subtitle?: string;\r\n\r\n  constructor(private readonly modal: NzModalRef) {}\r\n\r\n  destroyModal(): void {\r\n    this.modal.destroy({ data: 'this the result data' });\r\n  }\r\n}\r\n"}
